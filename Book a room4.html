<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏à‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
            text-align: center;
        }

        .container {
            max-width: 800px;
            margin: auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .result {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #007BFF;
            color: #007BFF;
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            text-align: left;
        }

        th, td {
            border: 1px solid #007BFF;
            padding: 10px;
            text-align: left;
        }

        th {
            background-color: #007BFF;
            color: white;
        }

        .history {
            text-align: left;
            margin-top: 20px;
        }

        .history ul {
            list-style-type: none;
            padding: 0;
        }

        .history li {
            background: #fff3cd;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            border: 1px solid #ffcc00;
            font-size: 14px;
        }

        button.cancel-btn {
            background-color: #dc3545;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 5px;
        }

        button.cancel-btn:hover {
            background-color: #c82333;
        }
    </style>
</head>
<body>

<div class="container">
    <h2>‡∏à‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</h2>

    <!-- ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á -->
    <div class="result" id="resultText">
        <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î -->
    </div>

    <h3>üìú ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
    <div class="history" id="historyList">
        <!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á -->
    </div>

    <a href="‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà3.html" target="_blank">
        <button class="back-btn">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
    </a>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        // ‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏à‡∏≤‡∏Å localStorage
        let bookings = JSON.parse(localStorage.getItem("bookings")) || [];

        // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á
        if (bookings.length > 0) {
            let latestBooking = bookings[bookings.length - 1];
            document.getElementById("resultText").innerHTML = `
                <table>
                    <tr>
                        <th>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</th>
                        <th>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</th>
                    </tr>
                    <tr>
                        <td>‡∏ä‡∏∑‡πà‡∏≠</td>
                        <td><strong>${latestBooking.name}</strong></td>
                    </tr>
                    <tr>
                        <td>‡∏´‡πâ‡∏≠‡∏á</td>
                        <td><strong>${latestBooking.room}</strong></td>
                    </tr>
                    <tr>
                        <td>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°</td>
                        <td><strong>${latestBooking.startDate}</strong></td>
                    </tr>
                    <tr>
                        <td>‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°</td>
                        <td><strong>${latestBooking.startTime}</strong></td>
                    </tr>
                    <tr>
                        <td>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î</td>
                        <td><strong>${latestBooking.endDate}</strong></td>
                    </tr>
                    <tr>
                        <td>‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î</td>
                        <td><strong>${latestBooking.endTime}</strong></td>

                    </tr>
                    <tr>
                        <td>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</td>
                        <td><strong>${latestBooking.phone}</strong></td>
                    </tr>
                    <tr>
                        <td>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°</td>
                        <td><strong>${latestBooking.participants}</strong></td>
                    </tr>
                    <tr>
                        <td>‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</td>
                        <td><strong>${latestBooking.position}</strong></td>
                    </tr>
                    <tr>
                        <td>‡∏™‡∏±‡∏á‡∏Å‡∏±‡∏î</td>
                        <td><strong>${latestBooking.department}</strong></td>
                    </tr>
                </table>
            `;
        } else {
            document.getElementById("resultText").innerHTML = "‚ùå ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á!";
        }

        // ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡∏∞‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
        let historyContainer = document.getElementById("historyList");
        if (bookings.length > 0) {
            let historyHTML = "<ul>";
            bookings.forEach((booking, index) => {
                historyHTML += `
                    <li>
                        üè¢ ‡∏´‡πâ‡∏≠‡∏á: <strong>${booking.room}</strong> <br>
                        üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: <strong>${booking.startDate}</strong> - <strong>${booking.endDate}</strong> <br>
                        ‚è∞ ‡πÄ‡∏ß‡∏•‡∏≤: <strong>${booking.startTime}</strong> - <strong>${booking.endTime}</strong> <br>
                        üë• ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°: <strong>${booking.participants}</strong> <br>
                        ‡∏ä‡∏∑‡πà‡∏≠: <strong>${booking.name}</strong> <br>
                        ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á: <strong>${booking.position}</strong> <br>
                        ‡∏™‡∏±‡∏á‡∏Å‡∏±‡∏î: <strong>${booking.department}</strong> <br>
                        <button class="cancel-btn" onclick="cancelBooking(${index})">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</button>
                    </li>
                `;
            });
            historyHTML += "</ul>";
            historyContainer.innerHTML = historyHTML;
        } else {
            historyContainer.innerHTML = "<p>üîπ ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</p>";
        }
    });

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
    function cancelBooking(index) {
        let bookings = JSON.parse(localStorage.getItem("bookings")) || [];
        bookings.splice(index, 1); // ‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
        localStorage.setItem("bookings", JSON.stringify(bookings)); // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô localStorage
        alert("‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ñ‡∏π‡∏Å‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡πâ‡∏ß!");
        location.reload(); // ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
    }
</script>

</body>
</html>